<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Audio Samples — Supervised ILRMA (UAV)</title>
  <style>
    /* ---------------- Base & Layout ---------------- */
    :root{
      --bg:#f7f7fb; --fg:#1f2937; --muted:#6b7280; --card:#ffffff;
      --brand:#0b63f6; --rule:#e5e7eb; --chip:#eef2ff; --chipfg:#1e3a8a;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,Inter,Arial,Helvetica,sans-serif;color:var(--fg);background:var(--bg);line-height:1.6}
    .wrap{max-width:980px;margin:48px auto;padding:32px;background:var(--card);border-radius:14px;box-shadow:0 12px 32px rgba(0,0,0,.06)}
    h1{margin:.25rem 0;font-size:2.2rem;letter-spacing:.2px}
    h2{margin:0.25rem 0 1rem;font-size:1.15rem;color:var(--muted);font-weight:500}
    hr{border:0;border-top:1px solid var(--rule);margin:20px 0}

    /* ---------------- Meta chips ---------------- */
    .chips{display:flex;flex-wrap:wrap;gap:.5rem;margin:.5rem 0 1.25rem}
    .chip{background:var(--chip);color:var(--chipfg);padding:.25rem .6rem;border-radius:999px;font-size:.8rem}

    /* ---------------- Metrics box ---------------- */
    .metrics{background:#fbfbfe;border:1px solid var(--rule);border-radius:12px;padding:14px 16px;margin:8px 0 22px}
    .metrics h3{margin:0 0 .5rem;font-size:1rem}
    .metrics ul{margin:.25rem 0 0 1.1rem}

    /* ---------------- Section (distance) ---------------- */
    .section{padding:22px 0 8px}
    .section h3{font-size:1.25rem;margin:.25rem 0 .25rem;color:#0b63f6}
    .section .snr{margin:0;color:var(--muted)}

    /* ---------------- Algorithm blocks ---------------- */
    .algo{border:1px solid var(--rule);border-radius:12px;padding:14px 14px 8px;margin:14px 0}
    .algo h4{margin:0 0 .25rem;font-size:1.05rem}
    .algo small{color:var(--muted)}
    .best{display:inline-flex;align-items:center;gap:.25rem;background:#fff3c4;color:#7c5300;border:1px solid #facc15;border-radius:999px;padding:.1rem .5rem;font-size:.75rem;margin-left:.4rem}

    /* ---------------- Players grid ---------------- */
    .players{display:grid;grid-template-columns:repeat(3,1fr);gap:.75rem 1rem;align-items:start;margin-top:.5rem}
    .players .colhead{font-weight:700;color:#374151;text-align:center}
    audio{width:100%;height:38px;border-radius:4px}
    .fallback{display:block;margin:.2rem 0 .6rem;font-size:.82rem;text-align:center}

    /* ---------------- Footer note ---------------- */
    .legend{font-size:.85rem;color:var(--muted);margin-top:10px}

    /* ---------------- Small screens ---------------- */
    @media (max-width:640px){
      .wrap{margin:0;padding:20px;border-radius:0}
      .players{grid-template-columns:1fr}
    }
      .players{grid-template-columns:1fr}
      .players .case{margin-top:.5rem}
    }
  </style>
</head>
<body>
  <main class="wrap" id="app">
    <header>
      <h1>Audio sample</h1>
      <h2>Benchmarks for supervised ILRMA-based enhancement on UAV recordings</h2>
      <div class="chips">
        <span class="chip">Format: WAV</span>
        <span class="chip">80&nbsp;dBA speech</span>
        <span class="chip">Distances: 3&nbsp;m & 5&nbsp;m</span>
      </div>
      <section class="metrics">
        <h3>Metrics</h3>
        <ul>
          <li><strong>SDRi</strong>: source‑to‑distortion ratio improvement</li>
          <li><strong>STOIi</strong>: short‑time objective intelligibility improvement</li>
        </ul>
      </section>
    </header>

    <!-- Sections are injected by JS below to avoid repeating markup.  -->
  </main>

  <script>
    // —— CONFIGURATION ——
    // Folder holding audio. Kept as path segments to safely URL‑encode spaces.
    const ROOT = ["audio samples"]; // must exist next to this HTML file
    const distances = {
      "3m": {
        snr: "-19±0.2 dB",
        cases: [1,2,3],
        metrics: {
          "silrma": { SDRi: "13±0.2 dB", STOIi: "0.22±0.004", best: "STOI" },
          "silrma-RCSCME": { SDRi: "17±0.3 dB", STOIi: "0.18±0.005" },
          "silrma-WF": { SDRi: "18±0.3 dB", STOIi: "0.19±0.004", best: "SDR" }
        }
      },
      "5m": {
        snr: "-23±0.3 dB",
        cases: [1,2,3],
        metrics: {
          "silrma": { SDRi: "11±0.2 dB", STOIi: "0.20±0.003", best: "STOI" },
          "silrma-RCSCME": { SDRi: "14±0.3 dB", STOIi: "0.15±0.003" },
          "silrma-WF": { SDRi: "16±0.4 dB", STOIi: "0.18±0.003", best: "SDR" }
        }
      }
    };

    // Display order & labels by algorithm key (file stem after distance_)
    const ALGOS = [
      { key: "input", label: "Input", describe: d => `SNR: <strong>${distances[d].snr}</strong>` },
      { key: "silrma", label: "Supervised ILRMA", describe: d => metricHTML(distances[d].metrics["silrma"], d) },
      { key: "silrma-RCSCME", label: "Supervised ILRMA + RCSCME", describe: d => metricHTML(distances[d].metrics["silrma-RCSCME"], d) },
      { key: "silrma-WF", label: "Supervised ILRMA + WF", describe: d => metricHTML(distances[d].metrics["silrma-WF"], d) }
    ];

    // —— HELPERS ——
    const enc = s => encodeURIComponent(s);
    const joinPath = segs => segs.map(enc).join('/');
    function filePath(distance, algoKey, idx){
      const fname = `${distance}_${algoKey}_${idx}.wav`;
      return joinPath([...ROOT, distance, fname]);
    }
    function metricHTML(m){
      if(!m) return '';
      const star = m.best ? `<span class="best" title="Best-performing in this distance">⭐ Best</span>` : '';
      return `<small><strong>SDRi:</strong> ${m.SDRi} &nbsp; <strong>STOIi:</strong> ${m.STOIi} ${star}</small>`;
    }

    // —— RENDER ——
    const app = document.getElementById('app');
    for(const d of Object.keys(distances)){
      const sec = document.createElement('section');
      sec.className = 'section';
      sec.innerHTML = `
        <h3>80 dBA speech loudness from a <strong>${d.replace('m','')} m</strong> distance</h3>
        <p class="snr">Distance label: <code>${d}</code> &nbsp;•&nbsp; ${distances[d].cases.length} cases</p>
      `;

      // Each algorithm block
      for(const a of ALGOS){
        const block = document.createElement('div');
        block.className = 'algo';
        block.innerHTML = `<h4>${a.label}</h4>${a.describe(d) ? `<p>${a.describe(d)}</p>` : ''}`;

        const grid = document.createElement('div');
        grid.className = 'players';

        // Header row: Case numbers
        for(const i of distances[d].cases){
          const head = document.createElement('div');
          head.className = 'colhead';
          head.textContent = `Case ${i}`;
          grid.appendChild(head);
        }

        // Players row: audio elements (3 columns)
        for(const i of distances[d].cases){
          const src = filePath(d, a.key, i);
          const cell = document.createElement('div');

          const audio = document.createElement('audio');
          audio.setAttribute('controls', '');
          audio.setAttribute('preload', 'none');
          audio.setAttribute('src', src);
          audio.setAttribute('aria-label', `${a.label} — ${d} — case ${i}`);

          const link = document.createElement('a');
          link.href = src;
          link.className = 'fallback';
          link.textContent = 'Open file';

          cell.appendChild(audio);
          cell.appendChild(link);
          grid.appendChild(cell);
        }

        block.appendChild(grid);
        sec.appendChild(block);
      }

      const legend = document.createElement('p');
      legend.className = 'legend';
      legend.innerHTML = '⭐ indicates the best‑performing framework for this distance.';
      sec.appendChild(legend);

      app.appendChild(sec);
      app.appendChild(document.createElement('hr'));
    }
  </script>
</body>
</html>
